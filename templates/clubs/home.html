{% extends "base.html" %}
{% block title %}Главная{% endblock %}

{% block content %}
<div class="row">
  <div class="col-lg-12">

    {# ===== Заголовок ===== #}
    <header class="mb-4 text-center">
      <h1 class="display-5 mb-1 hero-title">QazFooty</h1>
      <p class="lead hero-subtitle mb-0">Новости, клубы и фанатские группы Казахстанского футбола</p>
    </header>

    {# ===== НОВОСТИ ===== #}
    <section class="mb-5">
      <div class="d-flex justify-content-between align-items-center mb-3 section-head">
        <h2 class="h4 mb-0">Свежие новости</h2>
        <a class="pill-link" href="{% url 'news_list' %}">Все новости</a>
      </div>

      <div class="row">
        {% for n in news %}
          <div class="col-md-6 col-lg-4 mb-3">
            <div class="card h-100 fade-up">
              {% if n.image %}
                <img class="card-img-top" src="{{ n.image.url }}" alt="{{ n.title }}" style="height:180px;object-fit:cover;">
              {% endif %}
              <div class="card-body">
                <div class="small text-muted mb-1">{{ n.published_at|date:"d.m.Y H:i" }}</div>
                <h5 class="card-title">{{ n.title }}</h5>
                {% if n.source_url %}
                  <a class="btn btn-outline-dark btn-sm" href="{{ n.source_url }}" target="_blank" rel="noopener">Читать</a>
                {% endif %}
              </div>
            </div>
          </div>
        {% empty %}
          <div class="col-12"><div class="alert alert-light border">Новостей пока нет.</div></div>
        {% endfor %}
      </div>
    </section>

    {# ===== КЛУБЫ ===== #}
    <section class="mb-5">
      <div class="d-flex justify-content-between align-items-center mb-3 section-head">
        <h2 class="h4 mb-0">Клубы</h2>
        <a class="pill-link" href="{% url 'clubs_all' %}">Все клубы</a>
      </div>

      <div class="row">
        {% for c in clubs %}
          <div class="col-md-6 col-lg-3 mb-3">
            <div class="card h-100 fade-up">
              {% if c.logo %}
                <img class="card-img-top" src="{{ c.logo.url }}" alt="{{ c.name }}" style="height:180px;object-fit:cover;">
              {% endif %}
              <div class="card-body">
                <h5 class="card-title mb-2">{{ c.name }}</h5>
                <a class="btn btn-outline-dark btn-sm" href="{% url 'club_detail' c.id %}">Открыть</a>
              </div>
            </div>
          </div>
        {% empty %}
          <div class="col-12"><div class="alert alert-light border">Клубов пока нет.</div></div>
        {% endfor %}
      </div>
    </section>

    {# ===== ГРУППЫ ===== #}
    <section class="mb-4">
      <div class="d-flex justify-content-between align-items-center mb-3 section-head">
        <h2 class="h4 mb-0">Группы</h2>
        <a class="pill-link" href="{% url 'users:groups_list' %}">Все группы</a>
      </div>

      {% if groups %}
        <div class="row">
          {% for g in groups %}
            <div class="col-md-6 col-lg-3 mb-3">
              <div class="card h-100 fade-up">
                {% if g.profile and g.profile.avatar %}
                  <img class="card-img-top" src="{{ g.profile.avatar.url }}" alt="{{ g.name }}" style="height:180px;object-fit:cover;">
                {% endif %}
                <div class="card-body">
                  <h5 class="card-title mb-2">{{ g.name }}</h5>
                  <div class="text-muted small mb-2">Участников: {{ g.members_count|default:"—" }}</div>
                  <a class="btn btn-outline-dark btn-sm" href="{% url 'users:group_detail' g.id %}">Открыть</a>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="alert alert-light border">Групп пока нет.</div>
      {% endif %}
    </section>

  </div>
</div>
{% endblock %}




